import { NextAdmin{{#isTypescript}}, {{#isNext15}}Promise{{/isNext15}}PageProps{{/isTypescript}} } from "@premieroctet/next-admin";
import { getNextAdminProps } from "@premieroctet/next-admin/appRouter";
import { NextAdminRouterAdapter } from "@premieroctet/next-admin/adapters/next";
import PageLoader from "@premieroctet/next-admin/pageLoader";
import prisma from "{{prismaClientPath}}";
import "{{stylesPath}}";
import options from "{{optionsPath}}";

export default async function AdminPage(props{{#isTypescript}}: {{#isNext15}}Promise{{/isNext15}}PageProps{{/isTypescript}}) {
  const params = {{#isNext15}}await {{/isNext15}}props.params;
  const searchParams = {{#isNext15}}await {{/isNext15}}props.searchParams;

  const nextAdminProps = await getNextAdminProps({
    params: params.nextadmin,
    searchParams,
    basePath: "{{pageBasePath}}",
    apiBasePath: "{{apiBasePath}}",
    prisma,
    options
  });

  return (
    <NextAdminRouterAdapter>
      <NextAdmin pageLoader={<PageLoader />} {...nextAdminProps} />
    </NextAdminRouterAdapter>
  );
}
