# Next Admin

[![License](https://img.shields.io/badge/License-MIT-green.svg)](https://opensource.org/licenses/MIT)
[![Version](https://img.shields.io/npm/v/@premieroctet/next-admin/latest)](https://www.npmjs.com/package/@premieroctet/next-admin)

`next-admin` provides a customizable and turnkey admin dashboard for applications built with Next.js and powered by the Prisma ORM. It aims to simplify the development process by providing a turnkey admin system that can be easily integrated into your project.

<div align="center" style="display:flex;flex-direction:column;">
  <a href="https://next-admin.js.org">
    <img src="https://next-admin.js.org/screenshot.png" alt="Next Admin" />
  </a>
</div>

[https://next-admin.js.org](https://next-admin.js.org)

## Features

- üíÖ Customizable admin dashboard
- üíΩ Database relationships management
- üë©üèª‚Äçüíª User management (CRUD operations)
- üé® Dashboard widgets and customizable panels
- ‚öõÔ∏è Integration with Prisma ORM
- üëî Customizable list and form
- ‚öôÔ∏è Supports App Router and Page Router

## Installation

To install the library, run the following command:

```shell
yarn add @premieroctet/next-admin prisma-json-schema-generator
```

## Documentation

For detailed documentation, please refer to the [documentation](https://next-admin-docs.vercel.app/).

## Usage

To use the library in your Next.js application, follow these steps:

1. Create an admin route in your Next.js application.
2. Add the file `[[...nextadmin]].js` to the `pages/admin` directory.
3. Export the `NextAdmin` component from the file.
4. Use `getServerSideProps` to pass the `props` from the `nextAdminRouter` to the `NextAdmin` component.
5. Add the file `[[...nextadmin]].js` to the `pages/api/admin` directory.
6. Export `run` retrieved from the `createApiRouter` function

Bonus: Customize the admin dashboard by passing the `NextAdminOptions` options to the router and customize the admin dashboard by passing `dashboard` props to `NextAdmin` component. (More details in the [documentation](https://next-admin-docs.vercel.app/))

## Example

Here's a basic example of how to use the library:

#### App router

Set Next Admin server actions into your app:

```ts
// app/api/[[...nextadmin]]/route.ts
import { createAppHandler } from "@premieroctet/next-admin/dist/handler";
import schema from "@/prisma/json-schema/json-schema.json";
import { prisma } from "@/prisma";
import { options } from "@/options";

const { run } = createAppHandler({
  options,
  prisma,
  schema,
});

export { run as POST, run as GET, run as DELETE };
```

Then configure `page.tsx`

```tsx
// app/admin/[[...nextadmin]]/page.tsx
import { NextAdmin } from "@premieroctet/next-admin";
import { getPropsFromParams } from "@premieroctet/next-admin/dist/appRouter";
import "@premieroctet/next-admin/dist/styles.css";
import Dashboard from "../../../components/Dashboard";
import { options } from "../../../options";
import { prisma } from "../../../prisma";
import schema from "../../../prisma/json-schema/json-schema.json"; // generated by prisma-json-schema-generator on yarn run prisma generate

export default async function AdminPage({
  params,
  searchParams,
}: {
  params: { [key: string]: string[] };
  searchParams: { [key: string]: string | string[] | undefined } | undefined;
}) {
  const props = await getPropsFromParams({
    params: params.nextadmin,
    searchParams,
    options,
    prisma,
    schema,
  });

  return <NextAdmin {...props} dashboard={Dashboard} />;
}
```

#### Page Router

```tsx
// pages/api/admin/[[...nextadmin]].ts
import { options } from "@/pageRouterOptions";
import { prisma } from "@/prisma";
import { createApiRouter } from "@premieroctet/next-admin/dist/apiRoute";
import schema from "@/prisma/json-schema/json-schema.json";

// --> IMPORTANT OR WE CANNOT HANDLE FORMDATA <--
export const config = {
  api: {
    bodyParser: false,
  },
};

const { run } = createApiRouter({
  options,
  prisma,
  schema: schema,
});

export default run;
```

```tsx
import { PrismaClient } from "@prisma/client";
import schema from "./../../../prisma/json-schema/json-schema.json"; // generated by prisma-json-schema-generator on yarn run prisma generate
import "@premieroctet/next-admin/dist/styles.css";
import {
  AdminComponentProps,
  NextAdmin,
  NextAdminOptions,
} from "@premieroctet/next-admin";

const prisma = new PrismaClient();

export default function Admin(props: AdminComponentProps) {
  return <NextAdmin {...props} />;
}

export const getServerSideProps: GetServerSideProps = async ({ req, res }) => {
  const { nextAdminRouter } = await import(
    "@premieroctet/next-admin/dist/router"
  );

  const adminRouter = await nextAdminRouter(prisma, schema);
  return adminRouter.run(req, res) as Promise<
    GetServerSidePropsResult<{ [key: string]: any }>
  >;
};
```

## Demonstration

You can find the library code in the [next-admin](https://github.com/premieroctet/next-admin) repository.

Also you can find a deployed version of the library [here](https://next-admin-po.vercel.app/).

## Sponsors

This project is being developed by [Premier Octet](https://www.premieroctet.com), a Web and mobile agency specializing in React and React Native developments.

## License

This library is open source and released under the [MIT License](https://opensource.org/licenses/MIT).
